import java.io.BufferedWriter;
import java.io.IOException;
import java.io.InputStream;
import java.net.HttpURLConnection;
import java.net.URL;
import java.nio.file.Files;
import java.nio.file.Path;
import java.nio.file.StandardOpenOption;

public class WeightedGraphTripRace {
    public static void main(String[] args) {
        String apiKey = "YOUR_API_KEY";
        String departureAddress = "121 Baker St NW, Atlanta, GA 30313";
        String destinationAddress = "2450 Lower Roswell Rd, Marietta, GA 30068";

        try {
            // Driving directions
            String drivingUrl = buildDirectionsUrl(departureAddress, destinationAddress, "driving", apiKey);
            String directionsJson = fetchDirectionsJson(drivingUrl);
            WeightedGraph graph = constructWeightedGraph(directionsJson);
            graph.printGraph();
        } catch (IOException e) {
            e.printStackTrace();
        }
    }

    private static String buildDirectionsUrl(String origin, String destination, String mode, String apiKey) {
        return "https://maps.googleapis.com/maps/api/directions/json?" +
                "origin=" + origin.replace(" ", "+") +
                "&destination=" + destination.replace(" ", "+") +
                "&mode=" + mode +
                "&key=" + apiKey;
    }

    private static String fetchDirectionsJson(String url) throws IOException {
        URL apiEndpoint = new URL(url);

        HttpURLConnection connection = (HttpURLConnection) apiEndpoint.openConnection();
        InputStream inputStream = connection.getInputStream();
        String directionsJson = convertInputStreamToString(inputStream);
        connection.disconnect();

        return directionsJson;
    }

    private static String convertInputStreamToString(InputStream inputStream) throws IOException {
        StringBuilder stringBuilder = new StringBuilder();
        byte[] buffer = new byte[4096];
        int bytesRead;

        while ((bytesRead = inputStream.read(buffer)) != -1) {
            stringBuilder.append(new String(buffer, 0, bytesRead));
        }

        return stringBuilder.toString();
    }

    private static WeightedGraph constructWeightedGraph(String directionsJson) {
        // TODO: Parse the directions JSON and construct the weighted graph
        WeightedGraph graph = new WeightedGraph();
        // Add vertices and edges based on the directions

        return graph;
    }
}
